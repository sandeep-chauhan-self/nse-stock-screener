# MyPy configuration file for NSE Stock Screener
# This supplements the main pyproject.toml configuration

[mypy]
# Basic settings
python_version = 3.9
platform = win32
warn_return_any = true
warn_unused_configs = true
warn_redundant_casts = true
warn_unused_ignores = true
warn_no_return = true
warn_unreachable = true
strict_equality = true

# Type checking behavior
disallow_untyped_defs = false          # Start lenient, gradually tighten
disallow_incomplete_defs = true
check_untyped_defs = true
disallow_untyped_decorators = false    # Many decorators don't have types
no_implicit_optional = true
strict_optional = true

# Import discovery
ignore_missing_imports = false
follow_imports = normal
follow_imports_for_stubs = true

# Disallow dynamic typing
disallow_any_generics = false          # Start lenient
disallow_any_unimported = false
disallow_any_expr = false
disallow_any_decorated = false
disallow_any_explicit = false
disallow_subclassing_any = false

# Warnings
warn_missing_imports = true
warn_incomplete_stub = true

# Error output
show_error_codes = true
show_column_numbers = true
show_error_context = true
color_output = true
error_summary = true
pretty = true

# Caching
incremental = true
cache_dir = .mypy_cache

# Third-party library stubs
[mypy-pandas.*]
ignore_missing_imports = true

[mypy-numpy.*]
ignore_missing_imports = true

[mypy-matplotlib.*]
ignore_missing_imports = true

[mypy-seaborn.*]
ignore_missing_imports = true

[mypy-yfinance.*]
ignore_missing_imports = true

[mypy-requests.*]
ignore_missing_imports = true

[mypy-bs4.*]
ignore_missing_imports = true

[mypy-beautifulsoup4.*]
ignore_missing_imports = true

[mypy-scipy.*]
ignore_missing_imports = true

[mypy-sklearn.*]
ignore_missing_imports = true

[mypy-ta.*]
ignore_missing_imports = true

[mypy-talib.*]
ignore_missing_imports = true

[mypy-pytest.*]
ignore_missing_imports = true

[mypy-jinja2.*]
ignore_missing_imports = true

[mypy-openpyxl.*]
ignore_missing_imports = true

[mypy-plotly.*]
ignore_missing_imports = true

[mypy-kaleido.*]
ignore_missing_imports = true

[mypy-structlog.*]
ignore_missing_imports = true

[mypy-rich.*]
ignore_missing_imports = true

[mypy-psutil.*]
ignore_missing_imports = true

[mypy-pydantic.*]
ignore_missing_imports = true

# Project-specific module overrides

# Stricter rules for new backtesting system (FS.6)
[mypy-src.backtest.*]
disallow_untyped_defs = true
disallow_incomplete_defs = true
disallow_untyped_decorators = true
warn_return_any = true
warn_unreachable = true
strict_optional = true

# Stricter rules for core analysis modules
[mypy-src.composite_scorer]
disallow_incomplete_defs = true
check_untyped_defs = true

[mypy-src.risk_manager]
disallow_incomplete_defs = true
check_untyped_defs = true

[mypy-src.advanced_indicators]
disallow_incomplete_defs = true
check_untyped_defs = true

# More lenient for legacy modules during migration
[mypy-src.Equity_all]
ignore_errors = true

[mypy-src.check_deps]
ignore_errors = true

[mypy-src.demo_*]
ignore_errors = true

# Test files - more lenient
[mypy-tests.*]
disallow_untyped_defs = false
disallow_incomplete_defs = false
ignore_errors = false
warn_return_any = false
warn_unused_ignores = false

# Scripts - more lenient
[mypy-scripts.*]
ignore_errors = true